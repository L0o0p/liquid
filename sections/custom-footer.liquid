{{ 'custom-footer.css' | asset_url | stylesheet_tag }}

{%- if section.settings.show_country_selector or 
      section.settings.show_currency_selector or 
      section.settings.show_language_selector -%}
  <script src="{{ 'localization-form.js' | asset_url }}" defer="defer"></script>
{%- endif -%}

<footer class="custom-footer-container">
  <div class="footer-lace">
    {% render 'footer-lace' %}
  </div>
  <div class="custom-footer-content">
    <div class="custom-footer-main">
      <!-- è®¢é˜…éƒ¨åˆ† -->
      <div class="custom-footer-subscribe">
        {% comment %} <div class="h3-title"> {% endcomment %}
        <img src="{{ 'odinlake.png' | asset_url }}" alt="Selected" width="32" height="32">
        {% comment %} <h3>{{ section.settings.footer_title }}</h3> {% endcomment %}
        {% comment %} </div> {% endcomment %}
        <p>{{ section.settings.subscribe_text }}</p>

        {%- form 'customer', id: 'custom-footer-newsletter-form', class: 'custom-footer-newsletter-form' -%}
          <input type="hidden" name="contact[tags]" value="newsletter">
          <div class="custom-email-container">
            <div class="email-icon">
              {% render 'icon-email' %}
            </div>
            <div class="custom-email-input">
              <input
                type="email"
                name="contact[email]"
                placeholder="{{ section.settings.email_placeholder }}"
                required
              >
            </div>
          </div>
        {%- endform -%}
        <!-- ç¤¾äº¤åª’ä½“å›¾æ ‡éƒ¨åˆ† -->
        <div class="footer-social-icons">
          <!-- YouTube -->
          {% if section.settings.show_youtube or section.settings.social_youtube_link != blank %}
            <a
              href="{{ section.settings.social_youtube_link | default: '#' }}"
              class="social-icon-link"
              target="_blank"
              rel="noopener"
              aria-label="YouTube"
            >
              <div class="social-icon-circle">
                <img
                  src="{{ 'youtube.png' | asset_url }}"
                  alt="YouTube"
                  class="social-icon"
                  width="20"
                  height="20"
                  loading="lazy"
                >
              </div>
            </a>
          {% endif %}

          <!-- Twitter -->
          {% if section.settings.show_twitter or section.settings.social_twitter_link != blank %}
            <a
              href="{{ section.settings.social_twitter_link | default: '#' }}"
              class="social-icon-link"
              target="_blank"
              rel="noopener"
              aria-label="Twitter"
            >
              <div class="social-icon-circle">
                <img
                  src="{{ 'twitter.png' | asset_url }}"
                  alt="Twitter"
                  class="social-icon"
                  width="20"
                  height="20"
                  loading="lazy"
                >
              </div>
            </a>
          {% endif %}

          <!-- TikTok -->
          {% if section.settings.show_tiktok or section.settings.social_tiktok_link != blank %}
            <a
              href="{{ section.settings.social_tiktok_link | default: '#' }}"
              class="social-icon-link"
              target="_blank"
              rel="noopener"
              aria-label="TikTok"
            >
              <div class="social-icon-circle">
                <img
                  src="{{ 'tiktok.png' | asset_url }}"
                  alt="TikTok"
                  class="social-icon"
                  width="20"
                  height="20"
                  loading="lazy"
                >
              </div>
            </a>
          {% endif %}

          <!-- LinkedIn -->
          {% if section.settings.show_linkedin or section.settings.social_linkedin_link != blank %}
            <a
              href="{{ section.settings.social_linkedin_link | default: '#' }}"
              class="social-icon-link"
              target="_blank"
              rel="noopener"
              aria-label="LinkedIn"
            >
              <div class="social-icon-circle">
                <img
                  src="{{ 'linkedIn.png' | asset_url }}"
                  alt="LinkedIn"
                  class="social-icon"
                  width="20"
                  height="20"
                  loading="lazy"
                >
              </div>
            </a>
          {% endif %}

          <!-- Instagram -->
          {% if section.settings.show_instagram or section.settings.social_instagram_link != blank %}
            <a
              href="{{ section.settings.social_instagram_link | default: '#' }}"
              class="social-icon-link"
              target="_blank"
              rel="noopener"
              aria-label="Instagram"
            >
              <div class="social-icon-circle">
                <img
                  src="{{ 'instgram.png' | asset_url }}"
                  alt="Instagram"
                  class="social-icon"
                  width="20"
                  height="20"
                  loading="lazy"
                >
              </div>
            </a>
          {% endif %}

          <!-- Facebook -->
          {% if section.settings.show_facebook or section.settings.social_facebook_link != blank %}
            <a
              href="{{ section.settings.social_facebook_link | default: '#' }}"
              class="social-icon-link"
              target="_blank"
              rel="noopener"
              aria-label="Facebook"
            >
              <div class="social-icon-circle">
                <img
                  src="{{ 'facebook.png' | asset_url }}"
                  alt="Facebook"
                  class="social-icon"
                  width="20"
                  height="20"
                  loading="lazy"
                >
              </div>
            </a>
          {% endif %}
        </div>
      </div>

      <!-- é“¾æ¥å—å¾ªç¯ -->
      <div class="links-block">
        {% for block in section.blocks %}
          {% case block.type %}
            {% when 'link_list' %}
              <div class="custom-footer-links" {{ block.shopify_attributes }}>
                <h4 class="mobile-toggle">
                  {{ block.settings.heading -}}
                  <span class="toggle-icon">â–¼</span>
                </h4>
                {% if block.settings.menu != blank %}
                  <ul class="links-list">
                    {% for link in linklists[block.settings.menu].links %}
                      <li>
                        <a href="{{ link.url }}">{{ link.title }}</a>
                      </li>
                    {% endfor %}
                  </ul>
                {% endif %}
              </div>
          {% endcase %}
        {% endfor %}
      </div>
    </div>
  </div>
  <!-- åº•éƒ¨ä¿¡æ¯ -->
  <div class="custom-footer-bottom">
    <div class="custom-footer-content bottom-bar-content">
      <div class="custom-copyright">{{ section.settings.copyright_text }}</div>
      <div class="custom-language-payment">
        <!-- æœ¬åœ°åŒ–é€‰æ‹©å™¨ -->
        <div class="custom-localization">
          {%- if section.settings.show_country_selector and localization.available_countries.size > 1 -%}
            <div class="custom-localization-form">
              {%- form 'localization', id: 'FooterCountryForm', class: 'localization-form' -%}
                <div class="localization-form__select">
                  <h2 class="visually-hidden" id="FooterCountryLabel">
                <!-- {{ 'localization.country_label' | t }} -->
                </h2>
                  <div class="localization-selector">
                    <span class="localization-icon">{{ localization.country.flag.emoji }}</span>
                    <select 
                      class="localization-selector__select" 
                      name="country_code" 
                      aria-labelledby="FooterCountryLabel"
                      data-country-selector
                    >
                      {%- for country in localization.available_countries -%}
                        <option 
                          value="{{ country.iso_code }}" 
                          {%- if country.iso_code == localization.country.iso_code %} selected{% endif %}
                        >
                          {{ country.name }} ({{ country.currency.iso_code }} {{ country.currency.symbol }})
                        </option>
                      {%- endfor -%}
                    </select>
                    <span class="localization-arrow">
                      <!-- {% render 'icon-caret' %} -->
                    </span>
                  </div>
                </div>
                <button class="button button--tertiary">
                  <!-- {{ 'localization.update_country' | t }} -->
                </button>
              {%- endform -%}
            </div>
          {%- endif -%}

          {%- if section.settings.show_language_selector and localization.available_languages.size > 1 -%}
            <div class="custom-localization-form">
              {%- form 'localization', id: 'FooterLanguageForm', class: 'localization-form' -%}
                <div class="localization-form__select">
                  <h2 class="visually-hidden" id="FooterLanguageLabel">
                    <!-- {{ 'localization.language_label' | t }} -->
                  </h2>
                  <div class="localization-selector">
                    <!-- <span class="localization-icon">ğŸŒ</span> -->
                    <select 
                      class="localization-selector__select" 
                      name="locale_code" 
                      aria-labelledby="FooterLanguageLabel"
                      data-language-selector
                    >
                      {%- for language in localization.available_languages -%}
                        <option 
                          value="{{ language.iso_code }}" 
                          {%- if language.iso_code == localization.language.iso_code %} selected{% endif %}
                        >
                          {{ language.endonym_name | capitalize }}
                        </option>
                      {%- endfor -%}
                    </select>
                    <span class="localization-arrow">
                      <!-- {% render 'icon-caret' %} -->
                    </span>
                  </div>
                </div>
                <button class="button button--tertiary">
                  <!-- {{ 'localization.update_language' | t }} -->
                </button>
              {%- endform -%}
            </div>
          {%- endif -%}
        </div>

        {% if section.settings.show_payment_icons %}
          <div class="custom-payment-icons">
            {% for type in shop.enabled_payment_types %}
              <div class="custom-payment-icon">
                {{ type | payment_type_svg_tag }}
              </div>
            {% endfor %}
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</footer>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    // ç§»åŠ¨ç«¯ç‚¹å‡»äº¤äº’
    const toggles = document.querySelectorAll('.mobile-toggle');

    toggles.forEach((toggle) => {
      toggle.addEventListener('click', function () {
        const parent = this.closest('.custom-footer-links');
        parent.classList.toggle('active');

        // å…³é—­å…¶ä»–å±•å¼€çš„èœå•
        document.querySelectorAll('.custom-footer-links').forEach((item) => {
          if (item !== parent) item.classList.remove('active');
        });
      });
    });

    // çª—å£å¤§å°å˜åŒ–æ—¶é‡ç½®çŠ¶æ€
    window.addEventListener('resize', function () {
      if (window.innerWidth > 480) {
        document.querySelectorAll('.custom-footer-links').forEach((item) => {
          item.classList.remove('active');
        });
      }
    });
    
    // æœ¬åœ°åŒ–é€‰æ‹©å™¨äº¤äº’
    const countrySelector = document.querySelector('[data-country-selector]');
    const languageSelector = document.querySelector('[data-language-selector]');
    
    if (countrySelector) {
      countrySelector.addEventListener('change', function() {
        this.closest('form').submit();
      });
    }
    
    if (languageSelector) {
      languageSelector.addEventListener('change', function() {
        this.closest('form').submit();
      });
    }
  });
</script>

{% schema %}
{
  "name": "Custom Footer",
  // "type": "footer",
  "class": "section",
  "tag": "footer",
  "settings": [
    {
      "type": "text",
      "id": "footer_title",
      "label": "é¡µè„šæ ‡é¢˜",
      "default": "OdinLake"
    },
    {
      "type": "text",
      "id": "subscribe_text",
      "label": "è®¢é˜…æ–‡æœ¬",
      "default": "è¾“å…¥æ‚¨çš„ç”µå­é‚®ä»¶ä»¥ç‡å…ˆäº†è§£æ–°äº§å“ä¿¡æ¯ã€‚"
    },
    {
      "type": "text",
      "id": "email_placeholder",
      "label": "ç”µå­é‚®ä»¶è¾“å…¥æ¡†å ä½ç¬¦",
      "default": "è¾“å…¥æ‚¨çš„ç”µå­é‚®ä»¶"
    },
    {
      "type": "header",
      "content": "æœ¬åœ°åŒ–è®¾ç½®"
    },
    {
      "type": "checkbox",
      "id": "show_country_selector",
      "label": "æ˜¾ç¤ºå›½å®¶/åœ°åŒºé€‰æ‹©å™¨",
      "default": true,
      "info": "å…è®¸å®¢æˆ·é€‰æ‹©ä¸åŒçš„å›½å®¶/åœ°åŒºå’Œè´§å¸"
    },
    {
      "type": "checkbox",
      "id": "show_language_selector",
      "label": "æ˜¾ç¤ºè¯­è¨€é€‰æ‹©å™¨",
      "default": true,
      "info": "å…è®¸å®¢æˆ·é€‰æ‹©ä¸åŒçš„ç½‘ç«™è¯­è¨€"
    },
    {
      "type": "checkbox",
      "id": "show_currency_selector",
      "label": "æ˜¾ç¤ºè´§å¸é€‰æ‹©å™¨",
      "default": false,
      "info": "å…è®¸å®¢æˆ·é€‰æ‹©ä¸åŒçš„è´§å¸ï¼ˆå›½å®¶/åœ°åŒºé€‰æ‹©å™¨å·²åŒ…å«è´§å¸ï¼‰"
    },
    {
      "type": "header",
      "content": "æ”¯ä»˜ä¸ç‰ˆæƒ"
    },
    {
      "type": "text",
      "id": "copyright_text",
      "label": "ç‰ˆæƒæ–‡æœ¬",
      "default": "Â© 2025 OdinLake Inc. ä¿ç•™æ‰€æœ‰æƒåˆ©"
    },
    {
      "type": "checkbox",
      "id": "show_payment_icons",
      "label": "æ˜¾ç¤ºæ”¯ä»˜å›¾æ ‡",
      "default": true
    },
    {
      "type": "header",
      "content": "ç¤¾äº¤åª’ä½“é“¾æ¥"
    },
    {
      "type": "url",
      "id": "social_youtube_link",
      "label": "YouTubeé“¾æ¥"
    },
    {
      "type": "url",
      "id": "social_twitter_link",
      "label": "Twitteré“¾æ¥"
    },
    {
      "type": "url",
      "id": "social_tiktok_link",
      "label": "TikToké“¾æ¥"
    },
    {
      "type": "url",
      "id": "social_linkedin_link",
      "label": "LinkedIné“¾æ¥"
    },
    {
      "type": "url",
      "id": "social_instagram_link",
      "label": "Instagramé“¾æ¥"
    },
    {
      "type": "url",
      "id": "social_facebook_link",
      "label": "Facebooké“¾æ¥"
    },
    {
      "type": "header",
      "content": "ç¤¾äº¤åª’ä½“æ˜¾ç¤ºæ§åˆ¶"
    },
    {
      "type": "checkbox",
      "id": "show_youtube",
      "label": "æ˜¾ç¤ºYouTubeå›¾æ ‡",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_twitter",
      "label": "æ˜¾ç¤ºTwitterå›¾æ ‡",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_tiktok",
      "label": "æ˜¾ç¤ºTikTokå›¾æ ‡",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_linkedin",
      "label": "æ˜¾ç¤ºLinkedInå›¾æ ‡",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_instagram",
      "label": "æ˜¾ç¤ºInstagramå›¾æ ‡",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_facebook",
      "label": "æ˜¾ç¤ºFacebookå›¾æ ‡",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "link_list",
      "name": "é“¾æ¥åˆ—è¡¨",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "æ ‡é¢˜",
          "default": "é“¾æ¥åˆ—è¡¨"
        },
        {
          "type": "link_list",
          "id": "menu",
          "label": "èœå•",
          "info": "æ­¤èœå•æ˜¾ç¤ºåœ¨é¡µè„šä¸­"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom Footer",
      "blocks": [
        {
          "type": "link_list",
          "settings": {
            "heading": "Product",
            "menu": "products"
          }
        },
        {
          "type": "link_list",
          "settings": {
            "heading": "About",
            "menu": "footer"
          }
        },
        {
          "type": "link_list",
          "settings": {
            "heading": "Service",
            "menu": "customer-service"
          }
        },
        {
          "type": "link_list",
          "settings": {
            "heading": "Support",
            "menu": "support"
          }
        }
      ]
    }
  ]
}
{% endschema %}