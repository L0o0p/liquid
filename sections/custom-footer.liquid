{{ 'custom-footer.css' | asset_url | stylesheet_tag }}

{%- if section.settings.show_country_selector or 
      section.settings.show_currency_selector or 
      section.settings.show_language_selector -%}
  <script src="{{ 'localization-form.js' | asset_url }}" defer="defer"></script>
{%- endif -%}

<footer class="custom-footer-container">
  <div class="footer-lace">
    {% render 'footer-lace' %}
  </div>
  <div class="custom-footer-content">
    <div class="custom-footer-main">
      <!-- ËÆ¢ÈòÖÈÉ®ÂàÜ -->
      <div class="custom-footer-subscribe">
        {% comment %} <div class="h3-title"> {% endcomment %}
        <img src="{{ 'odinlake.png' | asset_url }}" alt="Selected" width="32" height="32">
        {% comment %} <h3>{{ section.settings.footer_title }}</h3> {% endcomment %}
        {% comment %} </div> {% endcomment %}
        <p>{{ section.settings.subscribe_text }}</p>

        {%- form 'customer', id: 'custom-footer-newsletter-form', class: 'custom-footer-newsletter-form' -%}
          <input type="hidden" name="contact[tags]" value="newsletter">
          <div class="custom-email-container">
            <div class="email-icon">
              {% render 'icon-email' %}
            </div>
            <div class="custom-email-input">
              <input
                type="email"
                name="contact[email]"
                placeholder="{{ section.settings.email_placeholder }}"
                required
              >
            </div>
          </div>
        {%- endform -%}
        <!-- Á§æ‰∫§Â™í‰ΩìÂõæÊ†áÈÉ®ÂàÜ -->
        <div class="footer-social-icons">
          <!-- YouTube -->
          {% if section.settings.show_youtube or section.settings.social_youtube_link != blank %}
            <a
              href="{{ section.settings.social_youtube_link | default: '#' }}"
              class="social-icon-link"
              target="_blank"
              rel="noopener"
              aria-label="YouTube"
            >
              <div class="social-icon-circle">
                <img
                  src="{{ 'youtube.png' | asset_url }}"
                  alt="YouTube"
                  class="social-icon"
                  width="20"
                  height="20"
                  loading="lazy"
                >
              </div>
            </a>
          {% endif %}

          <!-- Twitter -->
          {% if section.settings.show_twitter or section.settings.social_twitter_link != blank %}
            <a
              href="{{ section.settings.social_twitter_link | default: '#' }}"
              class="social-icon-link"
              target="_blank"
              rel="noopener"
              aria-label="Twitter"
            >
              <div class="social-icon-circle">
                <img
                  src="{{ 'twitter.png' | asset_url }}"
                  alt="Twitter"
                  class="social-icon"
                  width="20"
                  height="20"
                  loading="lazy"
                >
              </div>
            </a>
          {% endif %}

          <!-- TikTok -->
          {% if section.settings.show_tiktok or section.settings.social_tiktok_link != blank %}
            <a
              href="{{ section.settings.social_tiktok_link | default: '#' }}"
              class="social-icon-link"
              target="_blank"
              rel="noopener"
              aria-label="TikTok"
            >
              <div class="social-icon-circle">
                <img
                  src="{{ 'tiktok.png' | asset_url }}"
                  alt="TikTok"
                  class="social-icon"
                  width="20"
                  height="20"
                  loading="lazy"
                >
              </div>
            </a>
          {% endif %}

          <!-- LinkedIn -->
          {% if section.settings.show_linkedin or section.settings.social_linkedin_link != blank %}
            <a
              href="{{ section.settings.social_linkedin_link | default: '#' }}"
              class="social-icon-link"
              target="_blank"
              rel="noopener"
              aria-label="LinkedIn"
            >
              <div class="social-icon-circle">
                <img
                  src="{{ 'linkedIn.png' | asset_url }}"
                  alt="LinkedIn"
                  class="social-icon"
                  width="20"
                  height="20"
                  loading="lazy"
                >
              </div>
            </a>
          {% endif %}

          <!-- Instagram -->
          {% if section.settings.show_instagram or section.settings.social_instagram_link != blank %}
            <a
              href="{{ section.settings.social_instagram_link | default: '#' }}"
              class="social-icon-link"
              target="_blank"
              rel="noopener"
              aria-label="Instagram"
            >
              <div class="social-icon-circle">
                <img
                  src="{{ 'instgram.png' | asset_url }}"
                  alt="Instagram"
                  class="social-icon"
                  width="20"
                  height="20"
                  loading="lazy"
                >
              </div>
            </a>
          {% endif %}

          <!-- Facebook -->
          {% if section.settings.show_facebook or section.settings.social_facebook_link != blank %}
            <a
              href="{{ section.settings.social_facebook_link | default: '#' }}"
              class="social-icon-link"
              target="_blank"
              rel="noopener"
              aria-label="Facebook"
            >
              <div class="social-icon-circle">
                <img
                  src="{{ 'facebook.png' | asset_url }}"
                  alt="Facebook"
                  class="social-icon"
                  width="20"
                  height="20"
                  loading="lazy"
                >
              </div>
            </a>
          {% endif %}
        </div>
      </div>

      <!-- ÈìæÊé•ÂùóÂæ™ÁéØ -->
      <div class="links-block">
        {% for block in section.blocks %}
          {% case block.type %}
            {% when 'link_list' %}
              <div class="custom-footer-links" {{ block.shopify_attributes }}>
                <h4 class="mobile-toggle">
                  {{ block.settings.heading -}}
                  <span class="toggle-icon">‚ñº</span>
                </h4>
                {% if block.settings.menu != blank %}
                  <ul class="links-list">
                    {% for link in linklists[block.settings.menu].links %}
                      <li>
                        <a href="{{ link.url }}">{{ link.title }}</a>
                      </li>
                    {% endfor %}
                  </ul>
                {% endif %}
              </div>
          {% endcase %}
        {% endfor %}
      </div>
    </div>
  </div>
  <!-- Â∫ïÈÉ®‰ø°ÊÅØ -->
  <div class="custom-footer-bottom">
    <div class="custom-footer-content bottom-bar-content">
      <div class="custom-copyright">{{ section.settings.copyright_text }}</div>
      <div class="custom-language-payment">
        <!-- Êú¨Âú∞ÂåñÈÄâÊã©Âô® -->
        <div class="custom-localization">
          {%- if section.settings.show_country_selector and localization.available_countries.size > 1 -%}
            <div class="custom-localization-form">
              {%- form 'localization', id: 'FooterCountryForm', class: 'localization-form' -%}
                <div class="localization-form__select">
                  <h2 class="visually-hidden" id="FooterCountryLabel">
                <!-- {{ 'localization.country_label' | t }} -->
                </h2>
                  <div class="localization-selector">
                    <span class="localization-icon">{{ localization.country.flag.emoji }}</span>
                    <select 
                      class="localization-selector__select" 
                      name="country_code" 
                      aria-labelledby="FooterCountryLabel"
                      data-country-selector
                    >
                      {%- for country in localization.available_countries -%}
                        <option 
                          value="{{ country.iso_code }}" 
                          {%- if country.iso_code == localization.country.iso_code %} selected{% endif %}
                        >
                          {{ country.name }} ({{ country.currency.iso_code }} {{ country.currency.symbol }})
                        </option>
                      {%- endfor -%}
                    </select>
                    <span class="localization-arrow">
                      <!-- {% render 'icon-caret' %} -->
                    </span>
                  </div>
                </div>
                <button class="button button--tertiary">
                  <!-- {{ 'localization.update_country' | t }} -->
                </button>
              {%- endform -%}
            </div>
          {%- endif -%}

          {%- if section.settings.show_language_selector and localization.available_languages.size > 1 -%}
            <div class="custom-localization-form">
              {%- form 'localization', id: 'FooterLanguageForm', class: 'localization-form' -%}
                <div class="localization-form__select">
                  <h2 class="visually-hidden" id="FooterLanguageLabel">
                    <!-- {{ 'localization.language_label' | t }} -->
                  </h2>
                  <div class="localization-selector">
                    <!-- <span class="localization-icon">üåê</span> -->
                    <select 
                      class="localization-selector__select" 
                      name="locale_code" 
                      aria-labelledby="FooterLanguageLabel"
                      data-language-selector
                    >
                      {%- for language in localization.available_languages -%}
                        <option 
                          value="{{ language.iso_code }}" 
                          {%- if language.iso_code == localization.language.iso_code %} selected{% endif %}
                        >
                          {{ language.endonym_name | capitalize }}
                        </option>
                      {%- endfor -%}
                    </select>
                    <span class="localization-arrow">
                      <!-- {% render 'icon-caret' %} -->
                    </span>
                  </div>
                </div>
                <button class="button button--tertiary">
                  <!-- {{ 'localization.update_language' | t }} -->
                </button>
              {%- endform -%}
            </div>
          {%- endif -%}
        </div>

        {% if section.settings.show_payment_icons %}
          <div class="custom-payment-icons">
            {% for type in shop.enabled_payment_types %}
              <div class="custom-payment-icon">
                {{ type | payment_type_svg_tag }}
              </div>
            {% endfor %}
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</footer>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    // ÁßªÂä®Á´ØÁÇπÂáª‰∫§‰∫í
    const toggles = document.querySelectorAll('.mobile-toggle');

    toggles.forEach((toggle) => {
      toggle.addEventListener('click', function () {
        const parent = this.closest('.custom-footer-links');
        parent.classList.toggle('active');

        // ÂÖ≥Èó≠ÂÖ∂‰ªñÂ±ïÂºÄÁöÑËèúÂçï
        document.querySelectorAll('.custom-footer-links').forEach((item) => {
          if (item !== parent) item.classList.remove('active');
        });
      });
    });

    // Á™óÂè£Â§ßÂ∞èÂèòÂåñÊó∂ÈáçÁΩÆÁä∂ÊÄÅ
    window.addEventListener('resize', function () {
      if (window.innerWidth > 480) {
        document.querySelectorAll('.custom-footer-links').forEach((item) => {
          item.classList.remove('active');
        });
      }
    });
    
    // Êú¨Âú∞ÂåñÈÄâÊã©Âô®‰∫§‰∫í
    const countrySelector = document.querySelector('[data-country-selector]');
    const languageSelector = document.querySelector('[data-language-selector]');
    
    if (countrySelector) {
      countrySelector.addEventListener('change', function() {
        this.closest('form').submit();
      });
    }
    
    if (languageSelector) {
      languageSelector.addEventListener('change', function() {
        this.closest('form').submit();
      });
    }
  });
</script>

{% schema %}
{
  "name": "Custom Footer",
  // "type": "footer",
  "class": "section",
  "tag": "footer",
  "settings": [
    {
      "type": "text",
      "id": "footer_title",
      "label": "È°µËÑöÊ†áÈ¢ò",
      "default": "OdinLake"
    },
    {
      "type": "text",
      "id": "subscribe_text",
      "label": "ËÆ¢ÈòÖÊñáÊú¨",
      "default": "ËæìÂÖ•ÊÇ®ÁöÑÁîµÂ≠êÈÇÆ‰ª∂‰ª•ÁéáÂÖà‰∫ÜËß£Êñ∞‰∫ßÂìÅ‰ø°ÊÅØ„ÄÇ"
    },
    {
      "type": "text",
      "id": "email_placeholder",
      "label": "ÁîµÂ≠êÈÇÆ‰ª∂ËæìÂÖ•Ê°ÜÂç†‰ΩçÁ¨¶",
      "default": "ËæìÂÖ•ÊÇ®ÁöÑÁîµÂ≠êÈÇÆ‰ª∂"
    },
    {
      "type": "header",
      "content": "Êú¨Âú∞ÂåñËÆæÁΩÆ"
    },
    {
      "type": "checkbox",
      "id": "show_country_selector",
      "label": "ÊòæÁ§∫ÂõΩÂÆ∂/Âú∞Âå∫ÈÄâÊã©Âô®",
      "default": true,
      "info": "ÂÖÅËÆ∏ÂÆ¢Êà∑ÈÄâÊã©‰∏çÂêåÁöÑÂõΩÂÆ∂/Âú∞Âå∫ÂíåË¥ßÂ∏Å"
    },
    {
      "type": "checkbox",
      "id": "show_language_selector",
      "label": "ÊòæÁ§∫ËØ≠Ë®ÄÈÄâÊã©Âô®",
      "default": true,
      "info": "ÂÖÅËÆ∏ÂÆ¢Êà∑ÈÄâÊã©‰∏çÂêåÁöÑÁΩëÁ´ôËØ≠Ë®Ä"
    },
    {
      "type": "checkbox",
      "id": "show_currency_selector",
      "label": "ÊòæÁ§∫Ë¥ßÂ∏ÅÈÄâÊã©Âô®",
      "default": false,
      "info": "ÂÖÅËÆ∏ÂÆ¢Êà∑ÈÄâÊã©‰∏çÂêåÁöÑË¥ßÂ∏ÅÔºàÂõΩÂÆ∂/Âú∞Âå∫ÈÄâÊã©Âô®Â∑≤ÂåÖÂê´Ë¥ßÂ∏ÅÔºâ"
    },
    {
      "type": "header",
      "content": "ÊîØ‰ªò‰∏éÁâàÊùÉ"
    },
    {
      "type": "text",
      "id": "copyright_text",
      "label": "ÁâàÊùÉÊñáÊú¨",
      "default": "¬© 2025 OdinLake Inc. ‰øùÁïôÊâÄÊúâÊùÉÂà©"
    },
    {
      "type": "checkbox",
      "id": "show_payment_icons",
      "label": "ÊòæÁ§∫ÊîØ‰ªòÂõæÊ†á",
      "default": true
    },
    {
      "type": "header",
      "content": "Á§æ‰∫§Â™í‰ΩìÈìæÊé•"
    },
    {
      "type": "url",
      "id": "social_youtube_link",
      "label": "YouTubeÈìæÊé•"
    },
    {
      "type": "url",
      "id": "social_twitter_link",
      "label": "TwitterÈìæÊé•"
    },
    {
      "type": "url",
      "id": "social_tiktok_link",
      "label": "TikTokÈìæÊé•"
    },
    {
      "type": "url",
      "id": "social_linkedin_link",
      "label": "LinkedInÈìæÊé•"
    },
    {
      "type": "url",
      "id": "social_instagram_link",
      "label": "InstagramÈìæÊé•"
    },
    {
      "type": "url",
      "id": "social_facebook_link",
      "label": "FacebookÈìæÊé•"
    },
    {
      "type": "header",
      "content": "Á§æ‰∫§Â™í‰ΩìÊòæÁ§∫ÊéßÂà∂"
    },
    {
      "type": "checkbox",
      "id": "show_youtube",
      "label": "ÊòæÁ§∫YouTubeÂõæÊ†á",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_twitter",
      "label": "ÊòæÁ§∫TwitterÂõæÊ†á",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_tiktok",
      "label": "ÊòæÁ§∫TikTokÂõæÊ†á",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_linkedin",
      "label": "ÊòæÁ§∫LinkedInÂõæÊ†á",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_instagram",
      "label": "ÊòæÁ§∫InstagramÂõæÊ†á",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_facebook",
      "label": "ÊòæÁ§∫FacebookÂõæÊ†á",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "link_list",
      "name": "ÈìæÊé•ÂàóË°®",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Ê†áÈ¢ò",
          "default": "ÈìæÊé•ÂàóË°®"
        },
        {
          "type": "link_list",
          "id": "menu",
          "label": "ËèúÂçï",
          "info": "Ê≠§ËèúÂçïÊòæÁ§∫Âú®È°µËÑö‰∏≠"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom Footer",
      "blocks": [
        {
          "type": "link_list",
          "settings": {
            "heading": "Product",
            "menu": "products"
          }
        },
        {
          "type": "link_list",
          "settings": {
            "heading": "About",
            "menu": "footer"
          }
        },
        {
          "type": "link_list",
          "settings": {
            "heading": "Service",
            "menu": "customer-service"
          }
        },
        {
          "type": "link_list",
          "settings": {
            "heading": "Support",
            "menu": "support"
          }
        }
      ]
    }
  ]
}
{% endschema %}